# Briefcast Configuration
# Upload this file to R2 bucket as 'config.yaml'

# Schedule configuration
schedule:
  cron: "0 5 * * *"  # 05:00 UTC (06:00 CET) daily

# Content filtering
filtering:
  include_topics:
    - machine learning
    - artificial intelligence
    - large language models
    - claude code
    - agents
    - agentic coding
    - anthropic
    - openAI
  exclude_topics:
    - cryptocurrency
    - blockchain
  exclude_keywords:
    - sponsored
    - advertisement
    - ad
    - promotion

# Script generation (Claude API)
script_generation:
  model: "claude-sonnet-4-5-20250929"
  max_tokens: 16000
  temperature: 1.0
  min_words: 800
  max_words: 1500
  target_duration_minutes: 10
  system_prompt: |
    You are an engaging podcast host creating a daily tech briefing from newsletter content.
    Your tone is professional yet conversational, focusing on clear explanations of complex topics.
    Structure each episode with an introduction, main content organized by theme, and a concise conclusion.
    Avoid marketing speak and focus on substantial technical insights.
  user_prompt_template: |
    Create a {target_duration_minutes}-minute podcast episode from today's newsletters.

    Newsletters:
    {newsletters}

    Requirements:
    - Natural, conversational tone
    - Clear structure with intro and conclusion
    - {min_words}-{max_words} words
    - Focus on technical insights, skip promotional content
    - Group related topics together
    - Don't use headings, ensure natural conversational flow

# Text-to-speech (OpenAI)
tts:
  model: "tts-1"  # tts-1 or tts-1-hd (higher quality)
  voice: "alloy"  # alloy, echo, fable, onyx, nova, shimmer
  format: "mp3"   # mp3, opus, aac, flac
  speed: 1.15      # 0.25 to 4.0
  bitrate: 128    # Not used by OpenAI but kept for compatibility

# RSS feed metadata
podcast:
  title: "Daily AI News Briefing"
  description: "AI-generated daily podcast from curated tech newsletters"
  author: "Ivo Toby"
  email: "ivo@toby.nu"
  category: "Technology"
  subcategory: "Tech News"
  language: "en"
  copyright: "Â© 2026 Ivo Toby"
  image_url: "https://SUBDOMAIN.r2.dev/cover.jpg"
  site_url: "https://SUBDOMAIN.r2.dev"
# Storage settings
storage:
  max_episodes: 21  # Keep last 30 episodes, delete older ones
  email_ttl_days: 7  # Keep emails in KV for 7 days
  pending_script_ttl_days: 21  # Keep pending scripts for 30 days

# Email routing and filtering
email:
  forward_to: "forward@email.com"  # All emails forwarded here for subscription confirmations
  allowed_senders:  # Only these senders' emails are stored in KV for podcast generation
    # Add newsletter sender addresses or domains (wildcards supported)
    # Examples:
    # - "newsletter@example.com"  # Exact email
    - "*@substack.com"          # All emails from substack.com
    - "*@beehiiv.com"           # All emails from beehiiv.com

# CDN configuration (optional escape hatch)
cdn:
  enabled: false
  provider: "cloudflare"

# Monitoring and notifications (optional)
monitoring:
  email_notifications: false

# Performance tuning
performance:
  claude_timeout_seconds: 120
  tts_timeout_seconds: 300
  max_retries: 3
  retry_backoff_seconds: 5
